<!DOCTYPE html>
<html>
<head>
    <title>Smart News</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-dark shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">ðŸ“° Smart News</a>

        <div>
            {% if current_user.is_authenticated %}
                <a href="/dashboard" class="btn btn-primary btn-sm me-2">Dashboard</a>
                <a href="/logout" class="btn btn-danger btn-sm">Logout</a>
            {% else %}
                <a href="/login" class="btn btn-primary btn-sm">Admin Login</a>
            {% endif %}
        </div>
    </div>
</nav>

<div class="container mt-5">

    <!-- LIVE NEWS SECTION -->
    <h3 class="mb-4">ðŸ”¥ Live Headlines</h3>

    <div class="row">
        {% if live_news and live_news|length > 0 %}
            {% for article in live_news %}
            <div class="col-md-4 mb-4">
                <div class="card shadow rounded-4 h-100">

                    {% if article.urlToImage %}
                        <img src="{{ article.urlToImage }}"
                             class="card-img-top"
                             style="height:200px; object-fit:cover;">
                    {% endif %}

                    <div class="card-body d-flex flex-column">
                        <h6 class="fw-bold">
                            {{ article.title or "No Title Available" }}
                        </h6>

                        <a href="{{ article.url }}"
                           target="_blank"
                           class="btn btn-sm btn-outline-dark mt-auto">
                            Read More
                        </a>
                    </div>

                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">Live news not available right now.</p>
        {% endif %}
    </div>

    <hr class="my-5">

    <!-- YOUR DATABASE NEWS -->
    <h3 class="mb-4">ðŸ—‚ Your Articles</h3>

    <div class="row">
        {% if news_pagination.items %}
            {% for news in news_pagination.items %}
            <div class="col-md-4 mb-4">
                <div class="card shadow rounded-4 h-100">

                    {% if news.image %}
                        <img src="{{ url_for('static', filename='uploads/' + news.image) }}"
                             class="card-img-top"
                             style="height:200px; object-fit:cover;">
                    {% endif %}

                    <div class="card-body d-flex flex-column">
                        <h6 class="fw-bold">{{ news.title }}</h6>

                        <p class="text-muted">
                            {{ news.content[:120] }}...
                        </p>
                    </div>

                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">No articles added yet.</p>
        {% endif %}
    </div>

</div>

</body>
</html>
